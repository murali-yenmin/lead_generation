import { usePagination, DOTS } from './usePagination';
import { PaginationProps } from '../../../interfaces/table';
import { useState, useEffect } from 'react';

export const Pagination = ({
  onPageChange,
  totalCount,
  siblingCount = 1,
  currentPage = 1,
  pageSize,
}: PaginationProps) => {
  const paginationRange = usePagination({
    currentPage,
    totalCount,
    siblingCount,
    pageSize,
  }) as (number | string)[];

  if (!paginationRange || paginationRange.length < 2) {
    return null; // Hide pagination if only one page exists
  }

  const isFirstPage = currentPage === 1;
  const lastPage = paginationRange[paginationRange.length - 1];
  const isLastPage = currentPage === lastPage;

  return (
    <div className="pagination-info">
      <button
        className={`chevron action-btn ${isFirstPage ? 'disabled' : ''}`}
        disabled={isFirstPage}
        onClick={() => !isFirstPage && onPageChange(1)}
      >
        <svg
          width="14"
          height="13"
          viewBox="0 0 14 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.08438 8.48288L11.934 12.3478C12.132 12.5046 12.3998 12.5926 12.6789 12.5926C12.958 12.5926 13.2258 12.5046 13.4238 12.3478C13.5228 12.2695 13.6014 12.1764 13.6551 12.0738C13.7087 11.9711 13.7363 11.8611 13.7363 11.7499C13.7363 11.6388 13.7087 11.5287 13.6551 11.4261C13.6014 11.3235 13.5228 11.2304 13.4238 11.1521L8.56357 7.29562C8.46454 7.21735 8.38594 7.12422 8.3323 7.02161C8.27866 6.919 8.25104 6.80894 8.25104 6.69779C8.25104 6.58663 8.27866 6.47657 8.3323 6.37396C8.38594 6.27136 8.46454 6.17823 8.56357 6.09995L13.4238 2.24348C13.6228 2.08604 13.7351 1.87206 13.7361 1.64862C13.7371 1.42518 13.6266 1.21057 13.4291 1.05202C13.2315 0.893461 12.963 0.803941 12.6827 0.803152C12.4023 0.802362 12.133 0.890368 11.934 1.04781L7.08438 4.9127C6.49079 5.38634 6.15738 6.02838 6.15738 6.69779C6.15738 7.3672 6.49079 8.00924 7.08438 8.48288Z"
            fill="white"
          />
          <path
            d="M1.18984 8.48288L6.0395 12.3478C6.23746 12.5046 6.50525 12.5926 6.78438 12.5926C7.06351 12.5926 7.3313 12.5046 7.52927 12.3478C7.6283 12.2695 7.7069 12.1764 7.76054 12.0738C7.81418 11.9711 7.8418 11.8611 7.8418 11.7499C7.8418 11.6388 7.81418 11.5287 7.76054 11.4261C7.7069 11.3235 7.6283 11.2304 7.52927 11.1521L2.66904 7.29562C2.57001 7.21735 2.49141 7.12422 2.43777 7.02161C2.38413 6.919 2.35651 6.80894 2.35651 6.69779C2.35651 6.58663 2.38413 6.47657 2.43777 6.37396C2.49141 6.27136 2.57001 6.17823 2.66904 6.09995L7.52927 2.24348C7.72822 2.08604 7.84055 1.87207 7.84154 1.64862C7.84253 1.42518 7.7321 1.21058 7.53455 1.05202C7.33699 0.893463 7.0685 0.803943 6.78812 0.803153C6.50774 0.802363 6.23846 0.89037 6.0395 1.04781L1.18984 4.9127C0.596261 5.38634 0.26285 6.02838 0.26285 6.69779C0.26285 7.3672 0.59626 8.00924 1.18984 8.48288Z"
            fill="white"
          />
        </svg>
      </button>
      {/* Previous Page */}
      <button
        className={`chevron action-btn ${isFirstPage ? 'disabled' : ''}`}
        disabled={isFirstPage}
        onClick={() => !isFirstPage && onPageChange(currentPage - 1)}
      >
        <svg
          width="8"
          height="13"
          viewBox="0 0 8 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.13711 8.48288L5.98677 12.3478C6.18473 12.5046 6.45252 12.5926 6.73165 12.5926C7.01078 12.5926 7.27857 12.5046 7.47653 12.3478C7.57556 12.2695 7.65416 12.1764 7.7078 12.0738C7.76145 11.9711 7.78906 11.8611 7.78906 11.7499C7.78906 11.6388 7.76145 11.5287 7.7078 11.4261C7.65416 11.3235 7.57556 11.2304 7.47653 11.1521L2.61631 7.29562C2.51728 7.21735 2.43867 7.12422 2.38503 7.02161C2.33139 6.919 2.30378 6.80894 2.30378 6.69779C2.30378 6.58663 2.33139 6.47657 2.38503 6.37396C2.43867 6.27136 2.51728 6.17823 2.61631 6.09995L7.47653 2.24348C7.67549 2.08604 7.78782 1.87207 7.78881 1.64862C7.7898 1.42518 7.67937 1.21058 7.48181 1.05202C7.28426 0.893463 7.01576 0.803943 6.73539 0.803153C6.45501 0.802363 6.18572 0.89037 5.98677 1.04781L1.13711 4.9127C0.543526 5.38634 0.210116 6.02838 0.210115 6.69779C0.210115 7.3672 0.543526 8.00924 1.13711 8.48288Z"
            fill="white"
          />
        </svg>
      </button>
      {/* Page Numbers */}
      <div className="pagination-numbers">
        {paginationRange.map((pageNumberItem, idx) => {
          if (pageNumberItem === DOTS) {
            return (
              <div key={idx} className="dots">
                <span>...</span>
              </div>
            );
          }

          return (
            <button
              key={idx}
              className={`page-number ${pageNumberItem === currentPage ? 'active' : ''}`}
              onClick={() => onPageChange(Number(pageNumberItem))}
            >
              {pageNumberItem}
            </button>
          );
        })}
      </div>
      {/* Next Page */}
      <button
        className={`chevron action-btn ${isLastPage ? 'disabled' : ''}`}
        disabled={isLastPage}
        onClick={() => !isLastPage && onPageChange(currentPage + 1)}
      >
        <svg
          width="8"
          height="13"
          viewBox="0 0 8 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6.86289 4.91287L2.01323 1.04799C1.81527 0.891158 1.54748 0.803131 1.26835 0.803131C0.98922 0.803131 0.721431 0.891158 0.523469 1.04799C0.424439 1.12626 0.345836 1.21939 0.292195 1.322C0.238555 1.42461 0.210938 1.53466 0.210938 1.64582C0.210938 1.75698 0.238555 1.86704 0.292195 1.96964C0.345836 2.07225 0.424439 2.16538 0.523469 2.24366L5.38369 6.10013C5.48272 6.1784 5.56133 6.27153 5.61497 6.37414C5.66861 6.47675 5.69622 6.58681 5.69622 6.69796C5.69622 6.80912 5.66861 6.91918 5.61497 7.02179C5.56133 7.1244 5.48272 7.21752 5.38369 7.2958L0.523469 11.1523C0.324513 11.3097 0.212184 11.5237 0.211193 11.7471C0.210203 11.9706 0.320632 12.1852 0.518187 12.3437C0.715742 12.5023 0.98424 12.5918 1.26462 12.5926C1.54499 12.5934 1.81428 12.5054 2.01323 12.3479L6.86289 8.48305C7.45647 8.00941 7.78989 7.36738 7.78989 6.69796C7.78989 6.02855 7.45647 5.38651 6.86289 4.91287Z"
            fill="white"
          />
        </svg>
      </button>
      {/* Last Page */}
      <button
        className={`chevron action-btn ${isLastPage ? 'disabled' : ''}`}
        disabled={isLastPage}
        onClick={() => !isLastPage && onPageChange(lastPage as number)}
      >
        <svg
          width="14"
          height="13"
          viewBox="0 0 14 13"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6.91563 4.91287L2.06597 1.04799C1.86801 0.891158 1.60022 0.803131 1.32109 0.803131C1.04195 0.803131 0.774165 0.891158 0.576204 1.04799C0.477173 1.12626 0.39857 1.21939 0.34493 1.322C0.291289 1.42461 0.263672 1.53466 0.263672 1.64582C0.263672 1.75698 0.291289 1.86704 0.34493 1.96964C0.39857 2.07225 0.477173 2.16538 0.576204 2.24366L5.43643 6.10013C5.53546 6.1784 5.61406 6.27153 5.6677 6.37414C5.72134 6.47675 5.74896 6.58681 5.74896 6.69796C5.74896 6.80912 5.72134 6.91918 5.6677 7.02179C5.61406 7.1244 5.53546 7.21752 5.43643 7.2958L0.576204 11.1523C0.377247 11.3097 0.264919 11.5237 0.263928 11.7471C0.262937 11.9706 0.373367 12.1852 0.570922 12.3437C0.768477 12.5023 1.03697 12.5918 1.31735 12.5926C1.59773 12.5934 1.86701 12.5054 2.06597 12.3479L6.91563 8.48305C7.50921 8.00941 7.84262 7.36738 7.84262 6.69796C7.84262 6.02855 7.50921 5.38651 6.91563 4.91287Z"
            fill="white"
          />
          <path
            d="M12.8102 4.91287L7.9605 1.04799C7.76254 0.891158 7.49475 0.803131 7.21562 0.803131C6.93649 0.803131 6.6687 0.891158 6.47073 1.04799C6.3717 1.12626 6.2931 1.21939 6.23946 1.322C6.18582 1.42461 6.1582 1.53466 6.1582 1.64582C6.1582 1.75698 6.18582 1.86704 6.23946 1.96964C6.2931 2.07225 6.3717 2.16538 6.47073 2.24366L11.331 6.10013C11.43 6.1784 11.5086 6.27153 11.5622 6.37414C11.6159 6.47675 11.6435 6.58681 11.6435 6.69796C11.6435 6.80912 11.6159 6.91918 11.5622 7.02179C11.5086 7.1244 11.43 7.21752 11.331 7.2958L6.47073 11.1523C6.27178 11.3097 6.15945 11.5237 6.15846 11.7471C6.15747 11.9706 6.2679 12.1852 6.46545 12.3437C6.66301 12.5023 6.93151 12.5918 7.21188 12.5926C7.49226 12.5934 7.76154 12.5054 7.9605 12.3479L12.8102 8.48305C13.4037 8.00941 13.7372 7.36738 13.7372 6.69796C13.7372 6.02855 13.4037 5.38651 12.8102 4.91287Z"
            fill="white"
          />
        </svg>
      </button>
    </div>
  );
};

  
