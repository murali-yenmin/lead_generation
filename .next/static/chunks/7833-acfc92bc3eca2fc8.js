"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7833],{16674:(e,a,t)=>{t.d(a,{Ay:()=>d,Ul:()=>n,kN:()=>i});var r=t(66439),s=t(23464);let i=(0,r.zD)("settings/fetchRoles",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.get("/api/roles",{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to fetch roles.")}}),n=(0,r.zD)("settings/updateRolePermissions",async(e,a)=>{let{roleId:t,permissions:r}=e,{getState:i,rejectWithValue:n}=a,{auth:{token:d}}=i();if(!d)return n("Not authenticated");try{return(await s.A.put("/api/roles/".concat(t),{permissions:r},{headers:{Authorization:"Bearer ".concat(d)}})).data}catch(e){var l,o;return n((null==(o=e.response)||null==(l=o.data)?void 0:l.message)||"Failed to update permissions.")}}),d=(0,r.Z0)({name:"settings",initialState:{roles:[],isLoading:!1,isUpdating:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.roles=a.payload}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isUpdating=!1;let t=e.roles.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.roles[t]=a.payload)}).addCase(n.rejected,(e,a)=>{e.isUpdating=!1,e.error=a.payload})}}).reducer},30285:(e,a,t)=>{t.d(a,{$:()=>o,r:()=>l});var r=t(95155),s=t(12115),i=t(99708),n=t(74466),d=t(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:o=!1,...u}=e,c=o?i.DX:"button";return(0,r.jsx)(c,{className:(0,d.cn)(l({variant:s,size:n,className:t})),ref:a,...u})});o.displayName="Button"},44159:(e,a,t)=>{t.d(a,{$3:()=>i,Ay:()=>f,EU:()=>c,L2:()=>g,UU:()=>d,_u:()=>p,iB:()=>o,nB:()=>l,nv:()=>h,yU:()=>n});var r=t(66439),s=t(23464);let i=(0,r.zD)("clients/fetchClients",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i},clients:n}=t();if(!i)return r("No authentication token found.");try{let e=new URLSearchParams({page:n.page.toString(),limit:n.limit.toString()});return n.searchTerm&&e.append("search",n.searchTerm),"all"!==n.statusFilter&&e.append("status",n.statusFilter),(await s.A.get("/api/organizations?".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var d,l;return r((null==(l=e.response)||null==(d=l.data)?void 0:d.message)||"Failed to fetch clients.")}}),n=(0,r.zD)("clients/fetchClientById",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.get("/api/organizations/".concat(e),{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to fetch client.")}}),d=(0,r.zD)("clients/createClient",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.post("/api/organizations",e,{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to create client.")}}),l=(0,r.zD)("clients/updateClientStatus",async(e,a)=>{let{clientId:t,status:r}=e,{getState:i,rejectWithValue:n}=a,{auth:{token:d}}=i();if(!d)return n("Not authenticated");try{return(await s.A.patch("/api/organizations/".concat(t,"/status"),{status:r},{headers:{Authorization:"Bearer ".concat(d)}})).data}catch(e){var l,o;return n((null==(o=e.response)||null==(l=o.data)?void 0:l.message)||"Failed to update client status.")}}),o=(0,r.zD)("clients/updateClientSettings",async(e,a)=>{let{clientId:t,settings:r}=e,{getState:i,rejectWithValue:n}=a,{auth:{token:d}}=i();if(!d)return n("Not authenticated");try{return(await s.A.patch("/api/organizations/".concat(t,"/settings"),{settings:r},{headers:{Authorization:"Bearer ".concat(d)}})).data}catch(e){var l,o;return n((null==(o=e.response)||null==(l=o.data)?void 0:l.message)||"Failed to update settings.")}}),u=(0,r.Z0)({name:"clients",initialState:{clients:[],selectedClient:null,totalClients:0,page:1,limit:10,searchTerm:"",statusFilter:"all",isLoading:!0,isUpdatingSettings:!1,updatingClientId:null,error:null},reducers:{setClientsPage:(e,a)=>{e.page=a.payload},setClientsLimit:(e,a)=>{e.limit=a.payload,e.page=1},setClientsSearchTerm:(e,a)=>{e.searchTerm=a.payload,e.page=1},setClientsStatusFilter:(e,a)=>{e.statusFilter=a.payload,e.page=1}},extraReducers:e=>{e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.clients=a.payload.organizations,e.totalClients=a.payload.totalOrganizations}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.selectedClient=null,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.selectedClient=a.payload}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(d.fulfilled,e=>{e.isLoading=!1}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(l.pending,(e,a)=>{e.updatingClientId=a.meta.arg.clientId}).addCase(l.fulfilled,(e,a)=>{let t=e.clients.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.clients[t].status=a.payload.status),e.updatingClientId=null}).addCase(l.rejected,(e,a)=>{e.error=a.payload,e.updatingClientId=null}).addCase(o.pending,e=>{e.isUpdatingSettings=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.isUpdatingSettings=!1,e.selectedClient&&e.selectedClient._id===a.payload._id&&(e.selectedClient=a.payload);let t=e.clients.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.clients[t]=a.payload)}).addCase(o.rejected,(e,a)=>{e.isUpdatingSettings=!1,e.error=a.payload})}}),{setClientsPage:c,setClientsLimit:p,setClientsSearchTerm:g,setClientsStatusFilter:h}=u.actions,f=u.reducer},52179:(e,a,t)=>{t.d(a,{Ay:()=>v,Hd:()=>y,Ir:()=>g,NM:()=>f,V5:()=>m,aF:()=>h,a_:()=>l,fV:()=>d,gj:()=>o,hU:()=>i,nu:()=>u,pU:()=>c,rw:()=>n});var r=t(66439),s=t(23464);let i=(0,r.zD)("users/fetchUsers",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i},users:n}=t();if(!i)return r("No authentication token found.");try{let e=new URLSearchParams({page:n.page.toString(),limit:n.limit.toString()});return n.searchTerm&&e.append("search",n.searchTerm),"all"!==n.roleFilter&&e.append("role",n.roleFilter),"all"!==n.statusFilter&&e.append("status",n.statusFilter),(await s.A.get("/api/users?".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var d,l;return r((null==(l=e.response)||null==(d=l.data)?void 0:d.message)||"Failed to fetch users.")}}),n=(0,r.zD)("users/fetchUsersByOrganization",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.get("/api/users?organizationId=".concat(e),{headers:{Authorization:"Bearer ".concat(i)}})).data.users}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to fetch users.")}}),d=(0,r.zD)("users/fetchOrganizations",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.get("/api/organizations",{headers:{Authorization:"Bearer ".concat(i)}})).data.organizations}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to fetch organizations.")}}),l=(0,r.zD)("users/fetchTeamsForOrg",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.get("/api/organizations/".concat(e,"/teams"),{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to fetch teams.")}}),o=(0,r.zD)("users/createTeam",async(e,a)=>{let{organizationId:t,name:r}=e,{getState:i,rejectWithValue:n}=a,{auth:{token:d}}=i();if(!d)return n("Not authenticated");try{return(await s.A.post("/api/organizations/".concat(t,"/teams"),{name:r},{headers:{Authorization:"Bearer ".concat(d)}})).data}catch(e){var l,o;return n((null==(o=e.response)||null==(l=o.data)?void 0:l.message)||"Failed to create team.")}}),u=(0,r.zD)("users/addUser",async(e,a)=>{let{getState:t,rejectWithValue:r}=a,{auth:{token:i}}=t();if(!i)return r("Not authenticated");try{return(await s.A.post("/api/users",e,{headers:{Authorization:"Bearer ".concat(i)}})).data}catch(e){var n,d;return r((null==(d=e.response)||null==(n=d.data)?void 0:n.message)||"Failed to add user.")}}),c=(0,r.zD)("users/updateUserStatus",async(e,a)=>{let{userId:t,status:r}=e,{getState:i,rejectWithValue:n}=a,{auth:{token:d}}=i();if(!d)return n("Not authenticated");try{return(await s.A.patch("/api/users/".concat(t,"/status"),{status:r},{headers:{Authorization:"Bearer ".concat(d)}})).data}catch(e){var l,o;return n((null==(o=e.response)||null==(l=o.data)?void 0:l.message)||"Failed to update user status.")}}),p=(0,r.Z0)({name:"users",initialState:{users:[],totalUsers:0,page:1,limit:10,searchTerm:"",roleFilter:"all",statusFilter:"all",isLoading:!0,updatingUserId:null,error:null,organizations:[],teams:[],roles:[],status:"idle"},reducers:{setPage:(e,a)=>{e.page=a.payload},setLimit:(e,a)=>{e.limit=a.payload,e.page=1},setSearchTerm:(e,a)=>{e.searchTerm=a.payload,e.page=1},setRoleFilter:(e,a)=>{e.roleFilter=a.payload,e.page=1},setStatusFilter:(e,a)=>{e.statusFilter=a.payload,e.page=1}},extraReducers:e=>{e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.users=a.payload.users,e.totalUsers=a.payload.totalUsers}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.users=[]}).addCase(n.fulfilled,(e,a)=>{e.isLoading=!1,e.users=a.payload}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(d.pending,e=>{e.status="loading"}).addCase(d.fulfilled,(e,a)=>{e.organizations=a.payload,e.status="succeeded"}).addCase(d.rejected,e=>{e.status="failed"}).addCase(l.fulfilled,(e,a)=>{e.teams=a.payload}).addCase(o.fulfilled,(e,a)=>{e.teams.push(a.payload)}).addCase(u.pending,e=>{e.status="loading"}).addCase(u.fulfilled,e=>{e.status="succeeded"}).addCase(u.rejected,(e,a)=>{e.status="failed",e.error=a.payload}).addCase(c.pending,(e,a)=>{e.updatingUserId=a.meta.arg.userId}).addCase(c.fulfilled,(e,a)=>{let t=e.users.findIndex(e=>e._id===a.payload._id);-1!==t&&(e.users[t].status=a.payload.status),e.updatingUserId=null}).addCase(c.rejected,(e,a)=>{e.error=a.payload,e.updatingUserId=null}).addCase("settings/fetchRoles/fulfilled",(e,a)=>{e.roles=a.payload.map(e=>{let{_id:a,name:t,level:r}=e;return{_id:a,name:t,level:r}})})}}),{setPage:g,setLimit:h,setSearchTerm:f,setRoleFilter:y,setStatusFilter:m}=p.actions,v=p.reducer},59434:(e,a,t)=>{t.d(a,{cn:()=>i});var r=t(52596),s=t(39688);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},62523:(e,a,t)=>{t.d(a,{p:()=>n});var r=t(95155),s=t(12115),i=t(59434);let n=s.forwardRef((e,a)=>{let{className:t,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},81035:(e,a,t)=>{t.d(a,{M:()=>u});var r=t(66439),s=t(52),i=t(89519),n=t(52179),d=t(16674),l=t(44159);let o=(0,s.HY)({auth:i.Ay,users:n.Ay,settings:d.Ay,clients:l.Ay}),u=(0,r.U1)({reducer:o,middleware:e=>e({serializableCheck:{ignoredActions:["users/fetchUsers/fulfilled","settings/fetchRoles/fulfilled","settings/updateRolePermissions/fulfilled"],ignoredActionPaths:["meta.arg","payload.timestamp"],ignoredPaths:["items.dates"]}})})},87481:(e,a,t)=>{t.d(a,{dj:()=>p});var r=t(12115);let s=0,i=new Map,n=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},d=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],o={toasts:[]};function u(e){o=d(o,e),l.forEach(e=>{e(o)})}function c(e){let{...a}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,a]=r.useState(o);return r.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},89519:(e,a,t)=>{t.d(a,{Ay:()=>c,DY:()=>n,Lx:()=>i,X6:()=>u,eg:()=>d,y4:()=>o});var r=t(66439),s=t(23464);let i=(0,r.zD)("auth/loginUser",async(e,a)=>{let{rejectWithValue:t}=a;try{return(await s.A.post("/api/auth/login",e)).data}catch(e){var r,i;return t((null==(i=e.response)||null==(r=i.data)?void 0:r.message)||"Login failed")}}),n=(0,r.zD)("auth/registerUser",async(e,a)=>{let{rejectWithValue:t}=a;try{return(await s.A.post("/api/auth/register",e)).data}catch(e){var r,i;return t((null==(i=e.response)||null==(r=i.data)?void 0:r.message)||"Registration failed")}}),d=(0,r.zD)("auth/updateUserProfile",async(e,a)=>{let{rejectWithValue:t,getState:r}=a;try{return e}catch(e){var s,i;return t((null==(i=e.response)||null==(s=i.data)?void 0:s.message)||"Profile update failed")}}),l=(0,r.Z0)({name:"auth",initialState:{user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},reducers:{logoutUser:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("authToken"),localStorage.removeItem("user")},checkInitialAuth:e=>{{let a=localStorage.getItem("authToken"),t=localStorage.getItem("user"),r=null;try{r=t?JSON.parse(t):null}catch(e){r=null,localStorage.removeItem("user"),localStorage.removeItem("authToken")}e.token=a,e.user=r,e.isAuthenticated=!!a&&!!r,e.isLoading=!1}}},extraReducers:e=>{e.addCase(i.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.isAuthenticated=!0,e.user=a.payload.user,e.token=a.payload.token,localStorage.setItem("authToken",a.payload.token),localStorage.setItem("user",JSON.stringify(a.payload.user))}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.isLoading=!0,e.error=null}).addCase(n.fulfilled,e=>{e.isLoading=!1}).addCase(n.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(d.pending,e=>{}).addCase(d.fulfilled,(e,a)=>{if(e.user){let t={...e.user,...a.payload};e.user=t,localStorage.setItem("user",JSON.stringify(t))}}).addCase(d.rejected,(e,a)=>{console.error("Profile update failed:",a.payload)})}}),{logoutUser:o,checkInitialAuth:u}=l.actions,c=l.reducer}}]);