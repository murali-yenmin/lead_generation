(()=>{var e={};e.id=4469,e.ids=[4469],e.modules={257:(e,t,r)=>{Promise.resolve().then(r.bind(r,35123))},643:e=>{"use strict";e.exports=require("node:perf_hooks")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},6110:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},7252:e=>{"use strict";e.exports=require("express")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},14283:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},15079:(e,t,r)=>{"use strict";r.d(t,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>p});var s=r(60687),a=r(43210),i=r(22670),n=r(61662),l=r(89743),o=r(58450),d=r(4780);let c=i.bL;i.YJ;let p=i.WT,u=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.l9.displayName;let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})}));m.displayName=i.PP.displayName;let h=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=i.wn.displayName;let x=a.forwardRef(({className:e,children:t,position:r="popper",...a},n)=>(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...a,children:[(0,s.jsx)(m,{}),(0,s.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,s.jsx)(h,{})]})}));x.displayName=i.UC.displayName,a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.JU,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.JU.displayName;let f=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:t})]}));f.displayName=i.q7.displayName,a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.wv.displayName},16141:e=>{"use strict";e.exports=require("node:zlib")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19185:e=>{"use strict";e.exports=require("dgram")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r(60687),a=r(43210),i=r(4780);let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Textarea"},35123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(60687),a=r(43210),i=r(27605),n=r(63442),l=r(43214),o=r(29523),d=r(44493),c=r(89667),p=r(80013),u=r(29867),m=r(6110),h=r(78726),x=r(14283),f=r(11516),y=r(27247),g=r(82614);let j=(0,g.A)("Pilcrow",[["path",{d:"M13 4v16",key:"8vvj80"}],["path",{d:"M17 4v16",key:"7dpous"}],["path",{d:"M19 4H9.5a4.5 4.5 0 0 0 0 9H13",key:"sh4n9v"}]]),b=(0,g.A)("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]),v=(0,g.A)("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]),N=(0,g.A)("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]),w=(0,g.A)("Heading4",[["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 10v3a1 1 0 0 0 1 1h3",key:"tj5zdr"}],["path",{d:"M21 10v8",key:"1kdml4"}],["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}]]),k=(0,g.A)("Heading5",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17 13v-3h4",key:"1nvgqp"}],["path",{d:"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17",key:"2nebdn"}]]),C=(0,g.A)("Heading6",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["circle",{cx:"19",cy:"16",r:"2",key:"15mx69"}],["path",{d:"M20 10c-2 2-3 3.5-3 6",key:"f35dl0"}]]),q=(0,g.A)("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),M=(0,g.A)("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),R=(0,g.A)("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),z=(0,g.A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),A=(0,g.A)("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);var S=r(57736);let E=(0,g.A)("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);var P=r(85866),T=r(96834),V=r(42692),F=r(35950),_=r(6475);let I=(0,_.createServerReference)("404a87e27686ba1cda1b80efc1e543a3b3cd4a4ce1",_.callServer,void 0,_.findSourceMapURL,"generateEmailContent");var L=r(63503),H=r(34729),$=r(15079),O=r(4780),B=r(71669),D=r(64298);async function U(e){try{console.log(e,"input ====");let t=await D.A.post("/api/n8n/emailSender",e);return{success:!0,messageId:t?.data?.messageId||""}}catch(e){throw console.error("Error calling n8n email webhook:",e),e}}let Y=({id:e,label:t,placeholder:r,recipients:i,onRecipientsChange:n,allowCsvUpload:l=!1,error:d})=>{let[x,f]=(0,a.useState)(""),y=(0,a.useRef)(null),{toast:g}=(0,u.dj)(),j=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),b=()=>{let e=x.trim();e&&!i.includes(e)&&(j(e)?(n([...i,e]),f("")):g({variant:"destructive",title:"Invalid Email",description:`"${e}" is not a valid email address.`}))},v=e=>{n(i.filter((t,r)=>r!==e))};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:e,className:(0,O.cn)(d&&"text-destructive"),children:t}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.p,{id:e,type:"email",placeholder:r,value:x,onChange:e=>{f(e.target.value)},onKeyDown:e=>{("Enter"===e.key||","===e.key)&&(e.preventDefault(),b())},onBlur:b,className:(0,O.cn)(d&&"border-destructive")}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.$,{type:"button",variant:"outline",onClick:()=>y.current?.click(),children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Upload CSV"]}),(0,s.jsx)("input",{type:"file",ref:y,className:"sr-only",accept:".csv",onChange:e=>{let r=e.target.files?.[0];if(r&&"text/csv"===r.type){let e=new FileReader;e.onload=e=>{let r=(e.target?.result).split("\n").filter(e=>""!==e.trim()).flatMap(e=>e.split(",").map(e=>e.trim()).filter(Boolean)),s=r.filter(j),a=r.filter(e=>!j(e)),l=s.filter(e=>!i.includes(e));n([...i,...l]),a.length>0&&g({variant:"warning",title:"Some emails were invalid",description:`Could not import: ${a.join(", ")}`}),l.length>0?g({variant:"success",title:"Import Successful",description:`${l.length} new email(s) added to ${t}.`}):g({variant:"info",title:"No new emails",description:"All emails from the file were already in the list or invalid."})},e.readAsText(r)}else g({variant:"destructive",title:"Invalid File Type",description:"Please upload a .csv file."});y.current&&(y.current.value="")}})]})]}),d&&(0,s.jsx)("p",{className:"text-sm font-medium text-destructive",children:d}),i.length>0&&(0,s.jsx)(V.F,{className:"h-20 w-full rounded-md border",children:(0,s.jsx)("div",{className:"p-2 space-x-1 space-y-1",children:i.map((e,t)=>(0,s.jsxs)(T.E,{variant:"secondary",className:"text-sm font-normal gap-1 pl-2 pr-1",children:[e,(0,s.jsxs)("button",{onClick:()=>v(t),className:"rounded-full hover:bg-background/50 p-0.5",children:[(0,s.jsx)(h.A,{className:"size-3"}),(0,s.jsxs)("span",{className:"sr-only",children:["Remove ",e]})]})]},t))})})]})]})};function G({open:e,onOpenChange:t,onGenerate:r,isGenerating:i}){let[n,l]=(0,a.useState)(""),d=async()=>{await r(n),t(!1),l("")};return(0,s.jsx)(L.lG,{open:e,onOpenChange:t,children:(0,s.jsxs)(L.Cf,{children:[(0,s.jsxs)(L.c7,{children:[(0,s.jsxs)(L.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"size-5"})," AI Email Generator"]}),(0,s.jsx)(L.rr,{children:"Describe the email you want."})]}),(0,s.jsx)("div",{className:"py-4",children:(0,s.jsx)(H.T,{id:"ai-prompt-dialog",placeholder:"e.g., 'An email to our beta users announcing a new feature that allows them to export their data. The tone should be excited and thankful.'",className:"min-h-[150px] resize-none",value:n,onChange:e=>l(e.target.value),disabled:i})}),(0,s.jsxs)(L.Es,{children:[(0,s.jsx)(o.$,{variant:"ghost",onClick:()=>t(!1),disabled:i,children:"Cancel"}),(0,s.jsxs)(o.$,{onClick:d,disabled:i||!n.trim(),children:[i&&(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Generating...":"Generate Email"]})]})]})})}let J=l.Ik({toRecipients:l.YO(l.Yj().email()).min(1,{message:"Please add at least one recipient."}),ccRecipients:l.YO(l.Yj().email()).optional(),bccRecipients:l.YO(l.Yj().email()).optional(),replyToRecipients:l.YO(l.Yj().email()).optional(),subject:l.Yj().min(1,{message:"Subject is required."}),senderName:l.Yj().optional(),replyToSenderOnly:l.zM().optional(),attachments:l.bz().optional(),emailContent:l.Yj().min(1,{message:"Email content cannot be empty."})});function Z(){let[e,t]=(0,a.useState)([]),r=(0,a.useRef)(null),{toast:l}=(0,u.dj)(),[,m]=(0,a.useReducer)(e=>e+1,0),[x,g]=(0,a.useState)(!1),[T,V]=(0,a.useState)(!1),[_,L]=(0,a.useState)(!1),[H,D]=(0,a.useState)(!1),Z=(0,i.mN)({resolver:(0,n.u)(J),mode:"onChange",defaultValues:{toRecipients:[],ccRecipients:[],bccRecipients:[],replyToRecipients:[],subject:"",senderName:"",replyToSenderOnly:!1,emailContent:""}}),K=(0,a.useRef)(null),[W,X]=(0,a.useState)("p"),Q=e=>{let t=e.currentTarget.innerHTML;Z.setValue("emailContent","<p><br></p>"===t||"<br>"===t?"":t,{shouldValidate:!0}),L(!0)},ee=(e,t)=>{if(document.execCommand(e,!1,t),r.current){r.current.focus();let e=new Event("input",{bubbles:!0});r.current.dispatchEvent(e),m()}},et=e=>!1,er=()=>{},es=async e=>{D(!0);try{let t=await U(e);console.log(t,"result"),t&&l({variant:"success",title:"Email Sent!",description:"Your email has been successfully sent."}),D(!1)}catch(e){console.error("Error generating post:",e),l({variant:"destructive",title:"An error occurred",description:"Failed to generate post. Please try again."}),D(!1)}},ea=async e=>{if(!e.trim())return void l({variant:"destructive",title:"Empty Prompt",description:"Please provide a prompt for the AI to generate an email."});g(!0);try{let t=await I({prompt:e});Z.setValue("emailContent",t.emailContent,{shouldValidate:!0}),r.current&&(r.current.innerHTML=t.emailContent),L(!1),l({variant:"success",title:"Email Content Generated",description:"The AI has drafted an email for you."})}catch(e){console.error("Error generating email:",e),l({variant:"destructive",title:"Generation Failed",description:"There was an error generating the email content."})}finally{g(!1)}},ei=e=>{e.target.files&&t(t=>[...t,...Array.from(e.target.files)])},en=e=>{t(t=>t.filter((t,r)=>r!==e))};return Z.watch("emailContent"),(0,s.jsxs)("main",{className:"flex flex-1 flex-col gap-6 p-4 sm:px-6 md:gap-8 md:p-8",children:[(0,s.jsx)(B.lV,{...Z,children:(0,s.jsx)("form",{onSubmit:Z.handleSubmit(es),children:(0,s.jsxs)(d.Zp,{children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsxs)(d.ZB,{className:"flex items-center gap-2 text-2xl font-headline",children:[(0,s.jsx)(y.A,{className:"size-8"}),"Email Composer"]}),(0,s.jsx)(d.BT,{children:"Craft and send emails to your audience. Use the AI generator or write your own."})]}),(0,s.jsx)(d.Wu,{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(B.zB,{control:Z.control,name:"toRecipients",render:({field:e,fieldState:t})=>(0,s.jsx)(Y,{id:"to-recipients",label:"To",placeholder:"Add 'To' recipients...",recipients:e.value||[],onRecipientsChange:e.onChange,allowCsvUpload:!0,error:t.error?.message})}),(0,s.jsx)(B.zB,{control:Z.control,name:"subject",render:({field:e})=>(0,s.jsxs)(B.eI,{children:[(0,s.jsx)(B.lR,{children:"Subject"}),(0,s.jsx)(B.MJ,{children:(0,s.jsx)(c.p,{id:"subject",placeholder:"Your email subject",...e})}),(0,s.jsx)(B.C5,{})]})}),(0,s.jsx)(B.zB,{control:Z.control,name:"ccRecipients",render:({field:e})=>(0,s.jsx)(Y,{id:"cc-recipients",label:"CC",placeholder:"Add 'CC' recipients...",recipients:e.value||[],onRecipientsChange:e.onChange})}),(0,s.jsx)(B.zB,{control:Z.control,name:"bccRecipients",render:({field:e})=>(0,s.jsx)(Y,{id:"bcc-recipients",label:"BCC",placeholder:"Add 'BCC' recipients...",recipients:e.value||[],onRecipientsChange:e.onChange})}),(0,s.jsx)(B.zB,{control:Z.control,name:"senderName",render:({field:e})=>(0,s.jsxs)(B.eI,{children:[(0,s.jsx)(B.lR,{children:"Sender Name (Optional)"}),(0,s.jsx)(B.MJ,{children:(0,s.jsx)(c.p,{id:"sender-name",placeholder:"e.g., John Doe",...e})}),(0,s.jsx)(B.C5,{})]})}),(0,s.jsx)(B.zB,{control:Z.control,name:"replyToRecipients",render:({field:e})=>(0,s.jsx)(Y,{id:"reply-to-recipients",label:"Send Replies To (Optional)",placeholder:"Add reply-to addresses...",recipients:e.value||[],onRecipientsChange:e.onChange})})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(B.zB,{control:Z.control,name:"emailContent",render:({field:t,fieldState:a})=>(0,s.jsxs)(B.eI,{children:[(0,s.jsx)(B.lR,{children:"Email Content"}),(0,s.jsxs)("div",{className:(0,O.cn)("rounded-md border border-input",a.error&&"border-destructive"),children:[(0,s.jsxs)("div",{className:"p-2 flex items-center space-x-1 border-b flex-wrap",children:[(0,s.jsxs)($.l6,{value:W,onValueChange:e=>ee("formatBlock",e),children:[(0,s.jsx)($.bq,{className:"w-[150px]",children:(0,s.jsx)($.yv,{placeholder:"Format"})}),(0,s.jsxs)($.gC,{children:[(0,s.jsxs)($.eb,{value:"p",children:[(0,s.jsx)(j,{className:"inline-block mr-2 h-4 w-4"})," ","Paragraph"]}),(0,s.jsxs)($.eb,{value:"h1",children:[(0,s.jsx)(b,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 1"]}),(0,s.jsxs)($.eb,{value:"h2",children:[(0,s.jsx)(v,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 2"]}),(0,s.jsxs)($.eb,{value:"h3",children:[(0,s.jsx)(N,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 3"]}),(0,s.jsxs)($.eb,{value:"h4",children:[(0,s.jsx)(w,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 4"]}),(0,s.jsxs)($.eb,{value:"h5",children:[(0,s.jsx)(k,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 5"]}),(0,s.jsxs)($.eb,{value:"h6",children:[(0,s.jsx)(C,{className:"inline-block mr-2 h-4 w-4"})," ","Heading 6"]})]})]}),(0,s.jsx)(F.w,{orientation:"vertical",className:"h-6 mx-2"}),(0,s.jsx)(o.$,{type:"button",variant:et("bold")?"secondary":"ghost",size:"icon",onClick:()=>ee("bold"),children:(0,s.jsx)(q,{})}),(0,s.jsx)(o.$,{type:"button",variant:et("italic")?"secondary":"ghost",size:"icon",onClick:()=>ee("italic"),children:(0,s.jsx)(M,{})}),(0,s.jsx)(o.$,{type:"button",variant:et("underline")?"secondary":"ghost",size:"icon",onClick:()=>ee("underline"),children:(0,s.jsx)(R,{})}),(0,s.jsx)(F.w,{orientation:"vertical",className:"h-6 mx-2"}),(0,s.jsx)(o.$,{type:"button",variant:et("insertUnorderedList")?"secondary":"ghost",size:"icon",onClick:()=>ee("insertUnorderedList"),children:(0,s.jsx)(z,{})}),(0,s.jsx)(o.$,{type:"button",variant:et("insertOrderedList")?"secondary":"ghost",size:"icon",onClick:()=>ee("insertOrderedList"),children:(0,s.jsx)(A,{})}),(0,s.jsx)(F.w,{orientation:"vertical",className:"h-6 mx-2"}),(0,s.jsxs)(o.$,{type:"button",variant:"ghost",onClick:()=>V(!0),children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Generate with AI"]})]}),(0,s.jsx)(B.MJ,{children:(0,s.jsx)("div",{ref:r,id:"email-content",contentEditable:!0,onInput:Q,onFocus:()=>{er(),L(!0)},onBlur:()=>L(!1),onKeyUp:er,onMouseUp:er,className:(0,O.cn)("prose dark:prose-invert prose-sm max-w-none h-[400px] overflow-y-auto w-full rounded-b-md bg-background px-4 py-3 text-base ring-offset-background focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 text-start")})}),(0,s.jsxs)("div",{className:"p-2 border-t",children:[(0,s.jsxs)(o.$,{type:"button",variant:"ghost",onClick:()=>K.current?.click(),children:[(0,s.jsx)(E,{className:"mr-2"}),"Attach Files"]}),(0,s.jsx)("input",{type:"file",multiple:!0,ref:K,className:"sr-only",onChange:ei}),e.length>0&&(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsxs)(p.J,{children:["Attachments (",e.length,")"]}),(0,s.jsx)("div",{className:"space-y-1",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm p-1.5 rounded-md bg-accent/50 group",children:[(0,s.jsx)("span",{className:"truncate",children:e.name}),(0,s.jsx)(o.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>en(t),children:(0,s.jsx)(h.A,{className:"size-3.5"})})]},t))})]})]})]}),(0,s.jsx)(B.C5,{})]})})})]})}),(0,s.jsx)(d.wL,{className:"justify-end",children:(0,s.jsxs)(o.$,{type:"submit",disabled:!Z.formState.isValid||H,children:[H?(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(P.A,{className:"mr-2 h-4 w-4"}),H?"Sending...":"Send Email"]})})]})})}),(0,s.jsx)(G,{open:T,onOpenChange:V,onGenerate:ea,isGenerating:x})]})}},37067:e=>{"use strict";e.exports=require("node:http")},37366:e=>{"use strict";e.exports=require("dns")},37830:e=>{"use strict";e.exports=require("node:stream/web")},41279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(65239),a=r(48088),i=r(88170),n=r.n(i),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["email",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,72667)),"D:\\murali\\lead_generation\\src\\app\\email\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"D:\\murali\\lead_generation\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\murali\\lead_generation\\src\\app\\email\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/email/page",pathname:"/email",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41444:e=>{"use strict";e.exports=require("require-in-the-middle")},42692:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var s=r(60687),a=r(43210),i=r(68123),n=r(4780);let l=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(i.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",e),...r,children:[(0,s.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(o,{}),(0,s.jsx)(i.OK,{})]}));l.displayName=i.bL.displayName;let o=a.forwardRef(({className:e,orientation:t="vertical",...r},a)=>(0,s.jsx)(i.VM,{ref:a,orientation:t,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:(0,s.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=i.VM.displayName},44493:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>p});var s=r(60687),a=r(43210),i=r(4780);let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter"},44708:e=>{"use strict";e.exports=require("node:https")},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t},54379:e=>{"use strict";e.exports=require("node:path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56801:e=>{"use strict";e.exports=require("import-in-the-middle")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>u,Es:()=>h,L3:()=>x,c7:()=>m,lG:()=>o,rr:()=>f,zM:()=>d});var s=r(60687),a=r(43210),i=r(26134),n=r(78726),l=r(4780);let o=i.bL,d=i.l9,c=i.ZL;i.bm;let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.hJ,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=i.hJ.displayName;let u=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(c,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(i.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=i.UC.displayName;let m=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let h=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});h.displayName="DialogFooter";let x=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.hE,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=i.hE.displayName;let f=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.VY,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));f.displayName=i.VY.displayName},64298:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(51060),a=r(73537);let i=s.A.create({baseURL:"/",headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{console.log("Starting Request:",e);let t=a.M.getState().auth.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request Error:",e),Promise.reject(e))),i.interceptors.response.use(e=>(console.log("Response Successful:",e),e),e=>(console.error("Response Error:",e),e.response?(console.error("Status:",e.response.status),console.error("Data:",e.response.data)):e.request?console.error("Request:",e.request):console.error("Error Message:",e.message),Promise.reject(e)));let n=i},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71669:(e,t,r)=>{"use strict";r.d(t,{C5:()=>g,MJ:()=>f,Rr:()=>y,eI:()=>h,lR:()=>x,lV:()=>d,zB:()=>p});var s=r(60687),a=r(43210),i=r(8730),n=r(27605),l=r(4780),o=r(80013);let d=n.Op,c=a.createContext({}),p=({...e})=>(0,s.jsx)(c.Provider,{value:{name:e.name},children:(0,s.jsx)(n.xI,{...e})}),u=()=>{let e=a.useContext(c),t=a.useContext(m),{getFieldState:r,formState:s}=(0,n.xW)(),i=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...i}},m=a.createContext({}),h=a.forwardRef(({className:e,...t},r)=>{let i=a.useId();return(0,s.jsx)(m.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:r,className:(0,l.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let x=a.forwardRef(({className:e,...t},r)=>{let{error:a,formItemId:i}=u();return(0,s.jsx)(o.J,{ref:r,className:(0,l.cn)(a&&"text-destructive",e),htmlFor:i,...t})});x.displayName="FormLabel";let f=a.forwardRef(({...e},t)=>{let{error:r,formItemId:a,formDescriptionId:n,formMessageId:l}=u();return(0,s.jsx)(i.DX,{ref:t,id:a,"aria-describedby":r?`${n} ${l}`:`${n}`,"aria-invalid":!!r,...e})});f.displayName="FormControl";let y=a.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:a}=u();return(0,s.jsx)("p",{ref:r,id:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...t})});y.displayName="FormDescription";let g=a.forwardRef(({className:e,children:t,...r},a)=>{let{error:i,formMessageId:n}=u(),o=i?String(i?.message??""):t;return o?(0,s.jsx)("p",{ref:a,id:n,className:(0,l.cn)("text-sm font-medium text-destructive",e),...r,children:o}):null});g.displayName="FormMessage"},72667:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\murali\\\\lead_generation\\\\src\\\\app\\\\email\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\murali\\lead_generation\\src\\app\\email\\page.tsx","default")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},73496:e=>{"use strict";e.exports=require("http2")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"404a87e27686ba1cda1b80efc1e543a3b3cd4a4ce1":()=>d});var s=r(91199);r(42087);var a=r(95427),i=r(37612),n=r(33331);let l=i.z.object({prompt:i.z.string().describe("A prompt describing the purpose, audience, and key points of the email.")}),o=i.z.object({emailContent:i.z.string().describe("The generated email body content in simple HTML format.")});async function d(e){return p(e)}let c=a.ai.definePrompt({name:"generateEmailPrompt",input:{schema:l},output:{schema:o},prompt:`You are an expert email marketing copywriter.

The user will provide a prompt outlining the goal of an email.
You will generate a compelling and professional email body based on this prompt.

**Instructions:**
- The output should be in simple HTML format. Use tags like <p>, <strong>, <em>, <ul>, and <li>.
- Do not include <html>, <head>, or <body> tags. Only generate the content that would go inside the <body>.
- Do NOT include any action buttons, links, or clickable calls-to-action (e.g. no <a> tags, no <button> tags).
- Keep the tone professional and engaging.
- Structure the email logically with a clear introduction, body, and conclusion.

**User Prompt:**
{{{prompt}}}

Generate the output as a JSON object with the key "emailContent".
`}),p=a.ai.defineFlow({name:"generateEmailContentFlow",inputSchema:l,outputSchema:o},async e=>{let{output:t}=await c(e);return t});(0,n.D)([d]),(0,s.A)(d,"404a87e27686ba1cda1b80efc1e543a3b3cd4a4ce1",null)},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},79748:e=>{"use strict";e.exports=require("fs/promises")},80013:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(60687),a=r(43210),i=r(78148),n=r(24224),l=r(4780);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.b,{ref:r,className:(0,l.cn)(o(),e),...t}));d.displayName=i.b.displayName},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84297:e=>{"use strict";e.exports=require("async_hooks")},85866:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(82614).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},87105:(e,t,r)=>{Promise.resolve().then(r.bind(r,72667))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95427:(e,t,r)=>{"use strict";r.d(t,{ai:()=>i});var s=r(37612),a=r(9203);let i=(0,s.genkit)({plugins:[(0,a.YF)()],model:"googleai/gemini-2.0-flash"})},96834:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(60687);r(43210);var a=r(24224),i=r(4780);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,i.cn)(n({variant:t}),e),...r})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,6724,5744,1658,4136,676,1730,353],()=>r(41279));module.exports=s})();