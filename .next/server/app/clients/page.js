(()=>{var e={};e.id=5021,e.ids=[5021],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5857:(e,t,s)=>{Promise.resolve().then(s.bind(s,75419))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},42305:(e,t,s)=>{Promise.resolve().then(s.bind(s,48975))},48975:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var r=s(60687),a=s(43210),n=s(97476),i=s(44493),l=s(96834),c=s(17612),o=s(11516),d=s(81740),u=s(93090),m=s(85309),p=s(69795),x=s(76311),h=s(14975),g=s(43010),v=s(54864),j=s(98949),f=s(62622),b=s(29523),C=s(21342),A=s(55925),w=s(29867),y=s(16189),N=s(48117),_=s(27605),P=s(63442),k=s(43214),q=s(63503),z=s(71669),$=s(89667);let D=k.Ik({name:k.Yj().min(2,{message:"Organization name must be at least 2 characters."}),domain:k.Yj().min(3,{message:"Domain must be at least 3 characters."}).refine(e=>/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(e),{message:"Please enter a valid domain name (e.g., example.com)."})});function E({open:e,onOpenChange:t,onClientAdded:s}){let a=(0,v.wA)(),{toast:n}=(0,w.dj)(),{isLoading:i}=(0,v.d4)(e=>e.clients),l=(0,_.mN)({resolver:(0,P.u)(D),defaultValues:{name:"",domain:""}}),c=async e=>{try{await a((0,N.UU)(e)).unwrap(),n({title:"Client Created",description:`The organization "${e.name}" has been created successfully.`,variant:"success"}),s(),l.reset()}catch(e){n({title:"Failed to Create Client",description:e.message||"An error occurred while creating the client.",variant:"destructive"})}};return(0,r.jsx)(q.lG,{open:e,onOpenChange:e=>{e||l.reset(),t(e)},children:(0,r.jsxs)(q.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(q.c7,{children:[(0,r.jsx)(q.L3,{children:"Add New Client"}),(0,r.jsx)(q.rr,{children:"Enter the details for the new client organization."})]}),(0,r.jsx)(z.lV,{...l,children:(0,r.jsxs)("form",{onSubmit:l.handleSubmit(c),className:"space-y-4 py-4",children:[(0,r.jsx)(z.zB,{control:l.control,name:"name",render:({field:e})=>(0,r.jsxs)(z.eI,{children:[(0,r.jsx)(z.lR,{children:"Organization Name"}),(0,r.jsx)(z.MJ,{children:(0,r.jsx)($.p,{placeholder:"Example Inc.",...e})}),(0,r.jsx)(z.C5,{})]})}),(0,r.jsx)(z.zB,{control:l.control,name:"domain",render:({field:e})=>(0,r.jsxs)(z.eI,{children:[(0,r.jsx)(z.lR,{children:"Primary Domain"}),(0,r.jsx)(z.MJ,{children:(0,r.jsx)($.p,{placeholder:"example.com",...e})}),(0,r.jsx)(z.C5,{})]})}),(0,r.jsxs)(q.Es,{children:[(0,r.jsx)(b.$,{type:"button",variant:"ghost",onClick:()=>t(!1),children:"Cancel"}),(0,r.jsxs)(b.$,{type:"submit",disabled:i,children:[i&&(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Client"]})]})]})})]})})}function S(){let e=(0,v.wA)(),t=(0,y.useRouter)(),{toast:s}=(0,w.dj)(),{clients:_,totalClients:P,page:k,limit:q,searchTerm:z,statusFilter:$,isLoading:D,updatingClientId:S,error:M}=(0,v.d4)(e=>e.clients),{token:O,user:G}=(0,v.d4)(e=>e.auth),[R,B]=(0,a.useState)(null),[I,L]=(0,a.useState)(!1),[Z]=(0,n.d7)(z,500),F=Math.ceil(P/q),T=async()=>{if(!R)return;let{client:t,action:r}=R,a="activate"===r?"active":"deactivated",n=await e((0,N.nB)({clientId:t._id,status:a}));if(N.nB.fulfilled.match(n)){let e=r.charAt(0).toUpperCase()+r.slice(1);s({title:`Client ${e}d`,description:`${t.name}'s account has been successfully ${e.toLowerCase()}d.`,variant:"success"})}else s({title:"Action Failed",description:n.payload||`Failed to ${r} ${t.name}. Please try again.`,variant:"destructive"});B(null)},U=e=>{t.push(`/clients/${e._id}`)},K=(0,a.useMemo)(()=>[{accessorKey:"name",header:"Organization",cell:({row:e})=>{let t=e.original;return(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 rounded-lg bg-muted",children:(0,r.jsx)(c.A,{className:"size-5 text-muted-foreground"})}),(0,r.jsx)("p",{className:"font-medium",children:t.name})]})}},{accessorKey:"status",header:"Status",cell:({row:e})=>{let t=e.original;if(S===t._id)return(0,r.jsxs)(l.E,{variant:"outline",className:"animate-pulse",children:[(0,r.jsx)(o.A,{className:"mr-1.5 animate-spin"}),"Updating..."]});let s={active:{variant:"secondary",icon:d.A,label:"Active",className:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},deactivated:{variant:"destructive",icon:u.A,label:"Deactivated",className:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},pending:{variant:"default",icon:m.A,label:"Pending",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}}[t.status||"pending"];return(0,r.jsxs)(l.E,{variant:s.variant,className:s.className,children:[(0,r.jsx)(s.icon,{className:"mr-1.5"}),s.label]})}},{accessorKey:"createdAt",header:"Date Joined",cell:({row:e})=>(0,g.GP)(new Date(e.original.createdAt),"PPP")},{accessorKey:"actions",header:"",cell:({row:e})=>{let t=e.original,s="active"===t.status,a="Yenmin Communications"===t.name,n=S===t._id;return(0,r.jsxs)(C.rI,{children:[(0,r.jsx)(C.ty,{asChild:!0,children:(0,r.jsxs)(b.$,{variant:"ghost",className:"h-8 w-8 p-0",disabled:n,children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(p.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(C.SQ,{align:"end",children:[(0,r.jsx)(C.lp,{children:"Actions"}),(0,r.jsxs)(C._2,{onClick:()=>U(t),children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"View"]}),!a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.mB,{}),s?(0,r.jsxs)(C._2,{onClick:()=>B({client:t,action:"deactivate"}),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Deactivate"]}):(0,r.jsxs)(C._2,{onClick:()=>B({client:t,action:"activate"}),className:"text-green-600 focus:bg-green-500/10 focus:text-green-700 dark:text-green-400 dark:focus:text-green-400",children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Activate"]})]})]})]})}}],[t,S]),V=(0,a.useMemo)(()=>[{value:"all",label:"All Statuses"},{value:"active",label:"Active"},{value:"deactivated",label:"Deactivated"}],[]),J=R?.action||"deactivate",Y=J.charAt(0).toUpperCase()+J.slice(1),Q=`${Y} Client?`,W=`This will ${J} the organization ${R?.client.name}. This will also ${J} all users within this organization. Are you sure?`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("main",{className:"flex flex-1 flex-col gap-6 p-4 sm:px-6 md:gap-8 md:p-8",children:(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsxs)(i.ZB,{className:"flex items-center gap-2 text-2xl font-headline",children:[(0,r.jsx)(c.A,{className:"size-8"}),"Client Management"]}),(0,r.jsx)(i.BT,{children:"View, search, and manage all client organizations on the platform."})]}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)(j.b,{columns:K,data:_,isLoading:D,error:M,pageCount:F,currentPage:k,onPageChange:t=>e((0,N.EU)(t)),currentLimit:q,onLimitChange:t=>e((0,N._u)(t)),children:(0,r.jsx)(f.w,{searchTerm:z,onSearchChange:t=>e((0,N.L2)(t)),filters:[{value:$,onChange:t=>e((0,N.nv)(t)),placeholder:"Filter by status",options:V}],actions:G?.roleName==="Super Admin"?[{label:"Add Client",onClick:()=>L(!0)}]:[]})})})]})}),G?.roleName==="Super Admin"&&(0,r.jsx)(E,{open:I,onOpenChange:L,onClientAdded:()=>{L(!1),e((0,N.$3)())}}),(0,r.jsx)(A.Lt,{open:!!R,onOpenChange:e=>!e&&B(null),children:(0,r.jsxs)(A.EO,{children:[(0,r.jsxs)(A.wd,{children:[(0,r.jsxs)(A.r7,{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"deactivate"===J?"text-destructive":"text-green-500"}),Q]}),(0,r.jsx)(A.$v,{children:W})]}),(0,r.jsxs)(A.ck,{children:[(0,r.jsx)(A.Zr,{children:"Cancel"}),(0,r.jsx)(A.Rx,{onClick:T,className:"deactivate"===J?"bg-destructive hover:bg-destructive/90 text-destructive-foreground":"bg-green-600 hover:bg-green-600/90 text-white",children:Y})]})]})})]})}},51767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o});var r=s(65239),a=s(48088),n=s(88170),i=s.n(n),l=s(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["clients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,75419)),"D:\\murali\\lead_generation\\src\\app\\clients\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"D:\\murali\\lead_generation\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["D:\\murali\\lead_generation\\src\\app\\clients\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/clients/page",pathname:"/clients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},75419:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\murali\\\\lead_generation\\\\src\\\\app\\\\clients\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\murali\\lead_generation\\src\\app\\clients\\page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,6724,5744,1658,4136,676,9080,353,348,4220],()=>s(51767));module.exports=r})();